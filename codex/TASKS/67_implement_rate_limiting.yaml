id: 67
filename: 67_implement_rate_limiting.yaml
title: Implement Rate Limiting
description: >
  Add rate limiting to API endpoints to prevent abuse, protect against DDoS attacks,
  and ensure fair resource allocation.

  Implementation:
  - Install express-rate-limit
  - Create rate limiters for different endpoint types
  - Apply to all public endpoints
  - Stricter limits for crawler endpoints
  - Configure by IP and/or API key
  - Return 429 Too Many Requests with Retry-After header

  Example:
  npm install express-rate-limit

  import rateLimit from 'express-rate-limit';

  export const apiLimiter = rateLimit({
    windowMs: 15 * 60 * 1000, // 15 minutes
    max: 100,
    message: 'Too many requests, please try again later',
    standardHeaders: true,
    legacyHeaders: false
  });

  export const crawlerLimiter = rateLimit({
    windowMs: 60 * 1000, // 1 minute
    max: 10,
    message: 'Crawler rate limit exceeded'
  });

  app.use('/v1/', apiLimiter);
  app.use('/v1/crawler/', crawlerLimiter);

dependencies: []
