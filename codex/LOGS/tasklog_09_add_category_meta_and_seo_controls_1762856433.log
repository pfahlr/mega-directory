OpenAI Codex v0.57.0 (research preview)
--------
workdir: /var/home/rick/Development/mega-directory
model: gpt-5-codex
provider: openai
approval: never
sandbox: workspace-write [workdir, /tmp, $TMPDIR]
reasoning effort: high
reasoning summaries: auto
session id: 019a726e-792f-7683-a85f-8e12ea89a99a
--------
user
Implement the functionality described in codex/TASKS/09_add_category_meta_and_seo_controls.yaml, then verify with any available tests.

thinking
**Examining task instructions and repo structure**
exec
bash -lc ls in /var/home/rick/Development/mega-directory succeeded in 39ms:
admin
agents
AGENTS.md
api
astro
codex
codex.toml
codex.yaml
db
docker-compose.yml
docs
README.md

thinking
**Reading task file**
exec
bash -lc "sed -n '1,200p' codex/TASKS/09_add_category_meta_and_seo_controls.yaml" in /var/home/rick/Development/mega-directory succeeded in 38ms:
id: 9
title: Add Category Meta & SEO Controls
description: Include meta title/description fields in DB and expose to frontend via
  API. Default values fall back if not present.
dependencies:
- 3
- 4
- 6

thinking
**Exploring repo and API structure**
exec
bash -lc 'ls api' in /var/home/rick/Development/mega-directory succeeded in 56ms:
Dockerfile
index.js
node_modules
package.json
package-lock.json
test

thinking
**Inspecting api/index.js**
exec
bash -lc "sed -n '1,200p' api/index.js" in /var/home/rick/Development/mega-directory succeeded in 38ms:
const express = require('express');
const jwt = require('jsonwebtoken');

const DEFAULT_PORT = 3001;
const DEFAULT_LISTING_STATUS = 'INACTIVE';
const MAX_SLUG_LENGTH = 80;
const DEFAULT_ADMIN_TOKEN_TTL_SECONDS = 60 * 15;

function resolveConfig(overrides = {}) {
  const parsedPort = process.env.PORT ? parseInt(process.env.PORT, 10) : undefined;
  const envPort = Number.isNaN(parsedPort) ? undefined : parsedPort;
  const parsedAdminTokenTtl =
    overrides.adminTokenTtlSeconds ??
    (process.env.ADMIN_TOKEN_TTL_SECONDS
      ? parseInt(process.env.ADMIN_TOKEN_TTL_SECONDS, 10)
      : undefined);

  const baseConfig = {
    port: overrides.port ?? envPort ?? DEFAULT_PORT,
    adminJwtSecret: overrides.adminJwtSecret ?? process.env.ADMIN_JWT_SECRET,

thinking
**Continuing file viewing**
exec
bash -lc "sed -n '200,400p' api/index.js" in /var/home/rick/Development/mega-directory succeeded in 38ms:
    console.log(`API server running at http://localhost:${port}`);
  });
}

if (require.main === module) {
  startServer();
}

module.exports = {
  createServer
};

function createListingIngestionHandler(app) {
  return (req, res) => {
    const payloads = normalizeListingBatch(req.body);
    if (!payloads) {
      return res
        .status(400)
        .json({ error: 'Invalid listing payload', details: ['Request body must be an object or array'] });
    }
exec
bash -lc "sed -n '400,800p' api/index.js" in /var/home/rick/Development/mega-directory succeeded in 94ms:
    errors.push(`${fieldName} must be a valid email address`);
    return null;
  }
  const email = value.trim();
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(email)) {
    errors.push(`${fieldName} must be a valid email address`);
    return null;
  }
  return email.toLowerCase();
}

function sanitizeLocation(value) {
  if (!isPlainObject(value)) {
    return null;
  }
  const fields = ['addressLine1', 'addressLine2', 'city', 'region', 'postalCode', 'country'];
  const location = {};
  fields.forEach((field) => {
    const sanitized = sanitizeNullableString(value[field]);

thinking
**Examining database for meta fields**
exec
bash -lc 'ls db' in /var/home/rick/Development/mega-directory succeeded in 38ms:
migrations
schema.prisma
seed.ts

thinking
**Checking schema.prisma for ORM**
exec
bash -lc "sed -n '1,200p' db/schema.prisma" in /var/home/rick/Development/mega-directory succeeded in 38ms:
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ListingStatus {
  PENDING
  APPROVED
  REJECTED
  INACTIVE
}

enum DirectoryStatus {
  DRAFT
  ACTIVE
  ARCHIVED
exec
bash -lc "sed -n '200,400p' db/schema.prisma" in /var/home/rick/Development/mega-directory succeeded in 38ms:
  tier        FeaturedSlotTier
  position    Int              @default(1)
  label       String?
  startsAt    DateTime         @default(now())
  endsAt      DateTime?
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
  directoryId Int
  listingId   Int?

  directory Directory @relation(fields: [directoryId], references: [id])
  listing   Listing?  @relation(fields: [listingId], references: [id])

  @@unique([directoryId, tier, position])
}

model User {
  id             Int        @id @default(autoincrement())
  email          String     @unique
  passwordHash   String

thinking
**Verifying meta fields usage across stack**
exec
bash -lc 'rg -n "metaTitle" -n' in /var/home/rick/Development/mega-directory succeeded in 282ms:
db/migrations/001_core_schema.sql:31:  "metaTitle" TEXT,
db/migrations/001_core_schema.sql:48:  "metaTitle" TEXT,
db/migrations/001_core_schema.sql:67:  "metaTitle" TEXT,
db/seed.ts:25:      metaTitle: 'Professional Services Directory',
db/seed.ts:37:      metaTitle: 'Job Boards & Recruiters',
db/seed.ts:78:      metaTitle: 'Professional Services in NYC',
db/schema.prisma:54:  metaTitle       String?
db/schema.prisma:75:  metaTitle       String?
db/schema.prisma:97:  metaTitle       String?
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:186:bash -lc 'rg -n "metaTitle" -n' in /var/home/rick/Development/mega-directory

thinking
**Reviewing task requirements and admin interface**
exec
bash -lc 'ls admin' in /var/home/rick/Development/mega-directory succeeded in 42ms:
index.js
package.json
routes
views

thinking
**Checking for Express server in admin/index.js**
exec
bash -lc "sed -n '1,200p' admin/index.js" in /var/home/rick/Development/mega-directory succeeded in 50ms:
const express = require('express');
const app = express();
const port = process.env.PORT || 4000;

app.use(express.static('public'));
app.use(express.urlencoded({ extended: true }));
app.use(express.json());

app.set('view engine', 'ejs');
app.set('views', './views');

app.get('/', (req, res) => {
  res.redirect('/review');
});

app.use('/review', require('./routes/review'));

app.listen(port, () => {
  console.log(`Admin app listening at http://localhost:${port}`);
});

thinking
**Checking admin-related routes**
exec
bash -lc "sed -n '1,200p' admin/routes/review.js" in /var/home/rick/Development/mega-directory succeeded in 46ms:
const express = require('express');
const router = express.Router();

router.get('/', async (req, res) => {
  const listings = []; // Placeholder: fetch from API or DB
  res.render('review', { listings });
});

module.exports = router;

thinking
**Investigating meta fields handling in Astro frontend**
exec
bash -lc 'ls astro' in /var/home/rick/Development/mega-directory succeeded in 39ms:
astro.config.mjs
dist
Dockerfile
node_modules
package.json
package-lock.json
postcss.config.cjs
public
README.md
src
tailwind.config.mjs
test
tsconfig.json

thinking
**Exploring source directory contents**
exec
bash -lc 'ls astro/src' in /var/home/rick/Development/mega-directory succeeded in 40ms:
components
data
layouts
lib
pages
styles

thinking
**Exploring data components**
exec
bash -lc 'ls astro/src/data' in /var/home/rick/Development/mega-directory succeeded in 38ms:
directory-catalog.js

thinking
**Opening file**
exec
bash -lc "sed -n '1,200p' astro/src/data/directory-catalog.js" in /var/home/rick/Development/mega-directory succeeded in 38ms:
export const directoryCatalog = [
  {
    slug: 'professional-services-new-york-city',
    name: 'NYC Professional Services',
    heroTitle: 'Trusted Pros in New York City',
    heroSubtitle: 'Electricians, HVAC teams, and general contractors with transparent SLAs.',
    category: {
      slug: 'professional-services',
      name: 'Professional Services',
      description: 'Verified operators for commercial and residential work orders.',
    },
    location: {
      slug: 'new-york-city',
      name: 'New York City',
      state: 'NY',
      country: 'US',
      timezone: 'America/New_York',
    },
    stats: {
      coverage: '5 boroughs',

thinking
**Searching for API test files**
exec
bash -lc 'ls api/test' in /var/home/rick/Development/mega-directory succeeded in 38ms:
server.test.js
exec
bash -lc "sed -n '1,200p' api/test/server.test.js" in /var/home/rick/Development/mega-directory succeeded in 38ms:
const test = require('node:test');
const assert = require('node:assert');
const jwt = require('jsonwebtoken');
const { createServer } = require('..');

const baseConfig = Object.freeze({
  adminJwtSecret: 'test-admin-secret',
  adminJwtIssuer: 'mega-directory',
  adminJwtAudience: 'admin',
  adminLoginEmail: 'admin@example.com',
  adminLoginPasscode: 'letmein',
  crawlerBearerToken: 'crawler-token'
});

function findRoute(app, method, path) {
  const stack = (app._router && app._router.stack) || (app.router && app.router.stack) || [];
  const methodName = method.toLowerCase();
  return stack.find(
    (layer) => layer.route && layer.route.path === path && layer.route.methods[methodName]
  );
exec
bash -lc "sed -n '200,400p' api/test/server.test.js" in /var/home/rick/Development/mega-directory succeeded in 39ms:
  const res = runRoute(
    route,
    createRequest({ method: 'POST', headers: { Authorization: 'Bearer wrong-token' } }),
    createResponse()
  );

  assert.strictEqual(res.statusCode, 401);
  assert.strictEqual(res.body.error, 'Crawler token missing or invalid');
});

test('crawler ping accepts matching bearer token', () => {
  const app = createServer(baseConfig);
  const route = findRoute(app, 'post', '/v1/crawler/ping');
  const req = createRequest({
    method: 'POST',
    headers: { Authorization: `Bearer ${baseConfig.crawlerBearerToken}` }
  });
  const res = runRoute(route, req, createResponse());

  assert.strictEqual(res.statusCode, 200);

thinking
**Investigating API and frontend for meta fields**

Iâ€™m looking into whether the Category metaTitle and description are actually accessible through the API and whether the Astro frontend is set up to use them. The current API seems to focus on ingestion and auth, so Iâ€™ll search deeper for other endpoints or server modules that might handle categories or directories. I want to confirm if the DB schema needs updating or if this is just about exposing existing fields properly.
exec
bash -lc 'rg -n "createServer" -n' in /var/home/rick/Development/mega-directory succeeded in 177ms:
api/test/server.test.js:4:const { createServer } = require('..');
api/test/server.test.js:94:  const app = createServer(baseConfig);
api/test/server.test.js:103:  const app = createServer(baseConfig);
api/test/server.test.js:112:  const app = createServer(baseConfig);
api/test/server.test.js:131:  const app = createServer(baseConfig);
api/test/server.test.js:147:  const app = createServer(baseConfig);
api/test/server.test.js:163:  const app = createServer(baseConfig);
api/test/server.test.js:198:  const app = createServer(baseConfig);
api/test/server.test.js:211:  const app = createServer(baseConfig);
api/test/server.test.js:224:  const app = createServer(baseConfig);
api/test/server.test.js:237:  const app = createServer(baseConfig);
api/test/server.test.js:265:  const app = createServer(baseConfig);
api/test/server.test.js:294:  const app = createServer(baseConfig);
api/test/server.test.js:319:test('createServer enforces required configuration', () => {
api/test/server.test.js:321:    createServer({ crawlerBearerToken: 'only-crawler' });
api/test/server.test.js:325:    createServer({ adminJwtSecret: 'only-admin' });
api/index.js:61:function createServer(overrides = {}) {
api/index.js:196:  const app = createServer();
api/index.js:209:  createServer
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:94:  createServer

thinking
**Investigating task context and front-end files**
exec
bash -lc 'ls astro/src/pages' in /var/home/rick/Development/mega-directory succeeded in 38ms:
index.astro
listings

thinking
**Inspecting astro/src/pages/index.astro**
exec
bash -lc "sed -n '1,200p' astro/src/pages/index.astro" in /var/home/rick/Development/mega-directory succeeded in 45ms:
---
import BaseLayout from '../layouts/BaseLayout.astro';
import CategoryCard from '../components/CategoryCard.astro';
import HeroSection from '../components/HeroSection.astro';
import ListingItem from '../components/ListingItem.astro';

const featuredListings = [
  {
    link_text: 'Northwind Coffee Roasters',
    uri: 'https://example.com/northwind',
    description_short: 'Solar-powered roastery shipping to 38 states with zero-waste packaging.',
    description_long:
      'Certified organic beans, flexible wholesale programs, and an ADA-compliant tasting room that doubles as a community studio.',
    score: 97,
    badges: ['Carbon neutral', 'Wholesale ready', 'Local pickup'],
    category: 'Food & Beverage',
    location: 'Portland, OR',
    slug: 'northwind-coffee',
  },
  {

thinking
**Inspecting listings directory**
exec
bash -lc 'ls astro/src/pages/listings' in /var/home/rick/Development/mega-directory succeeded in 44ms:
[category]
index.astro

thinking
**Checking specific Astro file**
exec
bash -lc "sed -n '1,200p' astro/src/pages/listings/[category]/index.astro" in /var/home/rick/Development/mega-directory exited 2 in 39ms:
sed: can't read astro/src/pages/listings/[category]/index.astro: No such file or directory

thinking
**Handling special characters in paths**
exec
bash -lc "ls 'astro/src/pages/listings/[category]'" in /var/home/rick/Development/mega-directory succeeded in 45ms:
[location]
[location].astro

thinking
**Inspecting dynamic route file**
exec
bash -lc "sed -n '1,200p' 'astro/src/pages/listings/[category]/[location].astro'" in /var/home/rick/Development/mega-directory succeeded in 38ms:
---
import DirectoryPage from '../../../components/DirectoryPage.astro';
import { directoryCatalog } from '../../../data/directory-catalog.js';
import {
  findDirectoryEntry,
  sortListingsByScore,
  buildSubcategoryFilterNav,
  segmentFeaturedListings,
} from '../../../lib/directory-helpers.js';

export function getStaticPaths() {
  return directoryCatalog.map((directory) => ({
    params: {
      category: directory.category.slug,
      location: directory.location.slug,
    },
  }));
}

const { category, location } = Astro.params;

thinking
**Checking DirectoryPage component**
exec
bash -lc "sed -n '1,200p' astro/src/components/DirectoryPage.astro" in /var/home/rick/Development/mega-directory succeeded in 39ms:
---
import BaseLayout from '../layouts/BaseLayout.astro';
import DirectoryListing from './DirectoryListing.astro';

const {
  directory,
  navItems,
  heroStats,
  listings = [],
  totalListings = listings.length,
  subcategoryNav = [],
  featuredHero = null,
  featuredTierTwo = [],
} = Astro.props;

const hasSubcategoryNav = subcategoryNav.length > 0;
const activeFilter = hasSubcategoryNav
  ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
  : null;
const filterLabel = activeFilter?.label ?? 'All subcategories';

thinking
**Examining BaseLayout for meta tags**
exec
bash -lc "sed -n '1,200p' astro/src/layouts/BaseLayout.astro" in /var/home/rick/Development/mega-directory succeeded in 39ms:
---
import SiteFooter from '../components/SiteFooter.astro';
import SiteHeader from '../components/SiteHeader.astro';
import '../styles/global.css';

const {
  title = 'Mega Directory',
  description = 'Curated business listings with human-friendly scoring and best-in-class accessibility.',
  navItems,
  showHeader = true,
  showFooter = true,
} = Astro.props;

const siteName = 'Mega Directory';
const computedTitle = title === siteName ? siteName : `${title} Â· ${siteName}`;
const resolvedNavItems =
  navItems ??
  [
    { href: '#listings', label: 'Listings' },
    { href: '#categories', label: 'Categories' },

thinking
**Reviewing layout and metadata integration**
exec
bash -lc "sed -n '1,200p' astro/src/lib/directory-helpers.js" in /var/home/rick/Development/mega-directory succeeded in 39ms:
const FALLBACK_SCORE = -Infinity;
const DEFAULT_FEATURED_LIMIT = 3;
const FALLBACK_HERO_LABEL = 'Top pick';
const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };

const normalizeScore = (value) =>
  typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;

const normalizeSlug = (value, fallback = 'directory') => {
  const normalized = String(value ?? '')
    .trim()
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/^-+|-+$/g, '');
  return normalized || fallback;
};

const humanizeSlug = (value = '') =>
  String(value)
exec
bash -lc "sed -n '200,400p' astro/src/lib/directory-helpers.js" in /var/home/rick/Development/mega-directory succeeded in 43ms:
    return [];
  }

  const declared = Array.isArray(directory.subcategories) ? directory.subcategories : [];
  const listings = Array.isArray(directory.listings) ? directory.listings : [];
  const map = new Map();

  for (const subcategory of declared) {
    const slug = normalizeSlug(subcategory?.slug ?? subcategory?.name, '');
    if (!slug) {
      continue;
    }
    map.set(slug, {
      slug,
      name: subcategory?.name ?? humanizeSlug(slug),
      description: subcategory?.description ?? '',
      listingCount: 0,
    });
  }

exec
bash -lc "sed -n '400,800p' astro/src/lib/directory-helpers.js" in /var/home/rick/Development/mega-directory succeeded in 38ms:

  return { hero, tierTwo, remainingListings };
}

function normalizeFeaturedSlot(slot) {
  if (!slot) {
    return null;
  }

  const tier = typeof slot?.tier === 'string' ? slot.tier.trim().toUpperCase() : '';
  if (tier !== 'HERO' && tier !== 'PREMIUM') {
    return null;
  }

  const slugCandidate =
    slot?.listingSlug ?? slot?.slug ?? slot?.listing?.slug ?? slot?.listing?.name ?? '';
  const slug = normalizeSlug(slugCandidate, '');
  if (!slug) {
    return null;
  }

thinking
**Investigating category meta and API usage**
exec
bash -lc 'rg -n "directory" -n api' in /var/home/rick/Development/mega-directory succeeded in 41ms:
api/package-lock.json:2:  "name": "mega-directory-api",
api/package-lock.json:8:      "name": "mega-directory-api",
api/test/server.test.js:8:  adminJwtIssuer: 'mega-directory',
api/package.json:2:  "name": "mega-directory-api",
api/index.js:21:    adminJwtIssuer: overrides.adminJwtIssuer ?? process.env.ADMIN_JWT_ISSUER ?? 'mega-directory',

thinking
**Investigating task dependencies**
exec
bash -lc 'ls codex/TASKS' in /var/home/rick/Development/mega-directory succeeded in 38ms:
00_prepare_repository.yaml
01_initialize_astro_frontend.yaml
02_setup_api_server_with_express_and_jwt_auth.yaml
03_design_postgresql_schema.yaml
04_implement_listing_ingestion_api_endpoint.yaml
05_admin_auth_route_and_middleware.yaml
06_frontend_directory_page_rendering.yaml
07_frontend_subcategory_ui_and_layout.yaml
08_setup_featured_listings_logic.yaml
09_add_category_meta_and_seo_controls.yaml
10_scaffold_python_crawler_agent.yaml
11_llm_field_generation_via_jinja2.yaml
12_post_listings_from_crawler_to_api_server.yaml
13_create_json_crawler_configuration_schema.yaml
14_scaffold_admin_ui_application.yaml
15_admin_ui:_listing_review_table.yaml
16_admin_ui:_category_location_approval.yaml
17_admin_ui:_seo_field_editor.yaml
18_deploy_web_+_api_to_railway.yaml
19_setup_logging,_healthchecks_and_monitoring.yaml

thinking
**Reviewing task requirements and frontend specs**
exec
bash -lc "sed -n '1,200p' codex/TASKS/06_frontend_directory_page_rendering.yaml" in /var/home/rick/Development/mega-directory succeeded in 40ms:
id: 6
title: Frontend Directory Page Rendering
description: Generate directory pages using SSR in Astro, grouped by category/location.
  Listings sorted by score with tooltip and expandable content.
dependencies:
- 1
- 3

thinking
**Assessing task requirements and code context**
exec
bash -lc "sed -n '1,200p' README.md" in /var/home/rick/Development/mega-directory succeeded in 38ms:
# Mega Directory

Mega Directory is a server-rendered directory listing platform built with Astro, Express, and Prisma. It supports dynamic subdomains, AI-generated content enrichment, and moderation workflows.

## Features

- ðŸ›°ï¸ Subdomain-based regional directories (e.g. electricians.nyc.example.com)
- âš¡ Express API with JWT-based auth
- ðŸ§  AI agents for crawling, enrichment, and moderation (via OpenRouter)
- ðŸ§© Admin dashboard for approving or rejecting listings
- ðŸ’… Tailwind CSS and minimal JavaScript for accessibility and performance
- ðŸ³ Dockerized and deployable behind Cloudflare with SSR

## Tech Stack

- Astro (SSR)
- Express.js
- Prisma + PostgreSQL
- Tailwind CSS
- OpenRouter (AI Agents)

thinking
**Reviewing feature requirements and data flow**
exec
bash -lc "sed -n '1,200p' db/seed.ts" in /var/home/rick/Development/mega-directory succeeded in 38ms:
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
  const adminUser = await prisma.user.upsert({
    where: { email: 'admin@example.com' },
    update: {},
    create: {
      email: 'admin@example.com',
      passwordHash: 'placeholder-hash',
      displayName: 'Demo Admin',
      role: 'ADMIN',
      status: 'ACTIVE'
    }
  });

  const servicesCategory = await prisma.category.upsert({
    where: { slug: 'professional-services' },
    update: {},
exec
bash -lc "sed -n '200,400p' db/seed.ts" in /var/home/rick/Development/mega-directory succeeded in 41ms:
    update: {},
    create: {
      listingId: listing.id,
      subcategoryId: electricalSubcategory.id
    }
  });

  await prisma.listingSubcategory.upsert({
    where: {
      listingId_subcategoryId: {
        listingId: listing.id,
        subcategoryId: hvacSubcategory.id
      }
    },
    update: {},
    create: {
      listingId: listing.id,
      subcategoryId: hvacSubcategory.id
    }
  });

thinking
**Searching for Category Meta in docs**
exec
bash -lc 'rg -n "meta title" -n' in /var/home/rick/Development/mega-directory succeeded in 136ms:
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:38:description: Include meta title/description fields in DB and expose to frontend via
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:701:bash -lc 'rg -n "meta title" -n' in /var/home/rick/Development/mega-directory
codex/TASKS/17_admin_ui:_seo_field_editor.yaml:3:description: Allow meta title/description editing for category and category+location
codex/TASKS/CODEX_TODO.md:50:- [ ] 15_admin_category_seo_editor.yaml â€” UI for editing category/location SEO meta title and description.
codex/TASKS/09_add_category_meta_and_seo_controls.yaml:3:description: Include meta title/description fields in DB and expose to frontend via

thinking
**Examining meta fields in DB and tasks**
exec
bash -lc "sed -n '1,120p' db/migrations/001_core_schema.sql" in /var/home/rick/Development/mega-directory succeeded in 40ms:
-- Core relational schema for Mega Directory
-- Includes directories, listings, categorization, featured slots, users, and LLM configs

CREATE TYPE "ListingStatus" AS ENUM ('PENDING', 'APPROVED', 'REJECTED', 'INACTIVE');
CREATE TYPE "DirectoryStatus" AS ENUM ('DRAFT', 'ACTIVE', 'ARCHIVED');
CREATE TYPE "UserRole" AS ENUM ('ADMIN', 'EDITOR', 'MODERATOR', 'CRAWLER');
CREATE TYPE "UserStatus" AS ENUM ('INVITED', 'ACTIVE', 'SUSPENDED');
CREATE TYPE "FeaturedSlotTier" AS ENUM ('HERO', 'PREMIUM', 'STANDARD');
CREATE TYPE "LlmTargetType" AS ENUM ('LISTING', 'CATEGORY', 'DIRECTORY', 'SUBCATEGORY');

CREATE TABLE "User" (
  "id" SERIAL PRIMARY KEY,
  "email" TEXT NOT NULL UNIQUE,
  "passwordHash" TEXT NOT NULL,
  "displayName" TEXT,
  "role" "UserRole" NOT NULL DEFAULT 'ADMIN',
  "status" "UserStatus" NOT NULL DEFAULT 'INVITED',
  "apiTokenHash" TEXT,
  "lastLoginAt" TIMESTAMPTZ,
  "lastPasswordAt" TIMESTAMPTZ,

thinking
**Verifying meta fields API exposure**
exec
bash -lc 'rg -n "fetch" astro/src -n' in /var/home/rick/Development/mega-directory exited 1 in 45ms:


thinking
**Evaluating metaTitle integration**
exec
bash -lc "sed -n '1,200p' 'astro/src/pages/listings/index.astro'" in /var/home/rick/Development/mega-directory succeeded in 40ms:
---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { directoryCatalog } from '../../data/directory-catalog.js';
import { buildDirectoryGroups } from '../../lib/directory-helpers.js';

const groups = buildDirectoryGroups(directoryCatalog);
const totalLocations = groups.reduce((sum, group) => sum + group.locations.length, 0);
const totalListings = groups.reduce((sum, group) => sum + group.totalListings, 0);

const navItems = [
  { href: '#overview', label: 'Overview' },
  { href: '#directories', label: 'Directories' },
];

const heroStats = [
  { label: 'Active categories', value: groups.length },
  { label: 'Locations tracked', value: totalLocations },
  { label: 'Listings scored', value: totalListings },
];
---

thinking
**Investigating possible meta field requirements**
exec
bash -lc "sed -n '1,200p' codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log" in /var/home/rick/Development/mega-directory succeeded in 40ms:
OpenAI Codex v0.57.0 (research preview)
--------
workdir: /var/home/rick/Development/mega-directory
model: gpt-5-codex
provider: openai
approval: never
sandbox: workspace-write [workdir, /tmp, $TMPDIR]
reasoning effort: high
reasoning summaries: auto
session id: 019a726e-792f-7683-a85f-8e12ea89a99a
--------
user
Implement the functionality described in codex/TASKS/09_add_category_meta_and_seo_controls.yaml, then verify with any available tests.

thinking
**Examining task instructions and repo structure**
exec
bash -lc ls in /var/home/rick/Development/mega-directory succeeded in 39ms:
admin
agents

thinking
**Reviewing previous logs and planning API inspection**
exec
bash -lc 'rg -n "api" astro/src' in /var/home/rick/Development/mega-directory succeeded in 44ms:
astro/src/data/directory-catalog.js:171:        summary: 'Snow-load ready assemblies plus rapid hail inspections.',
astro/src/layouts/BaseLayout.astro:38:      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
astro/src/layouts/BaseLayout.astro:43:      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
astro/src/pages/index.astro:23:    description_short: 'Trauma-informed therapists specializing in remote-first care.',
astro/src/pages/index.astro:57:    description: 'Therapists, fitness collectives, clinics, and mobile care.',

thinking
**Checking for task instructions**
exec
bash -lc "sed -n '1,200p' codex/TASKS/CODEX_TODO.md" in /var/home/rick/Development/mega-directory succeeded in 38ms:
# CODEX TODO

This document lists the Codex tasks in their recommended execution order.
Each task corresponds to a YAML file under `/codex/TASKS/`.

---

## 00 - Repository Setup

- [ ] 00_prepare_repository.yaml â€” Prepare the repository structure, move directories into place, update README and docker-compose config.

---

## 01â€“05 - Core Scaffolding

- [ ] 01_initialize_astro_frontend.yaml â€” Scaffold the Astro SSR frontend site.
- [ ] 02_initialize_api_server.yaml â€” Set up the Express/PostgreSQL API server with base routing and JWT auth.
- [ ] 03_initialize_database_schema.yaml â€” Define and migrate core tables: listings, categories, locations, directory.
- [ ] 04_initialize_admin_app.yaml â€” Scaffold a separate admin web interface with basic routing and layout.
- [ ] 05_initialize_python_crawler.yaml â€” Bootstrap the external Python-based crawler project with config loading and CLI entrypoint.

thinking
**Analyzing metadata feature integration**

Iâ€™m sorting through the outdated task list versus whatâ€™s actually in the codebase, especially about adding category meta and SEO controls. It looks like the front-end relies on static data rather than a real API, so Iâ€™ll likely update the `directoryCatalog` data file to include meta fields and adjust the `DirectoryPage` to use this info for meta tags, also checking for existing tests or adding new ones as needed.
exec
bash -lc 'ls astro/test' in /var/home/rick/Development/mega-directory succeeded in 38ms:
directory-helpers.test.mjs

thinking
**Inspecting test files**
exec
bash -lc "sed -n '1,200p' astro/test/directory-helpers.test.mjs" in /var/home/rick/Development/mega-directory succeeded in 48ms:
import test from 'node:test';
import assert from 'node:assert/strict';
import {
  sortListingsByScore,
  buildDirectoryGroups,
  buildDirectoryPath,
  buildSubcategoryPath,
  buildDirectorySubcategories,
  buildSubcategoryFilterNav,
  filterListingsBySubcategory,
  findDirectoryEntry,
  segmentFeaturedListings,
} from '../src/lib/directory-helpers.js';

const sampleDirectories = [
  {
    slug: 'professional-services-new-york-city',
    name: 'NYC Professional Services',
    category: { slug: 'professional-services', name: 'Professional Services' },
    location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
exec
bash -lc "sed -n '200,400p' astro/test/directory-helpers.test.mjs" in /var/home/rick/Development/mega-directory succeeded in 47ms:
  assert.strictEqual(all.href, '/listings/professional-services/new-york-city');
  assert.ok(all.active === false);
  assert.strictEqual(all.count, 3);

  assert.strictEqual(hvac.href, '/listings/professional-services/new-york-city/hvac');
  assert.ok(hvac.active, 'HVAC entry active');
  assert.strictEqual(hvac.count, 2);

  assert.strictEqual(
    electricians.href,
    '/listings/professional-services/new-york-city/electricians',
  );
  assert.ok(!electricians.active);
});

test('filterListingsBySubcategory reduces results to a matching slug', () => {
  const listings = sampleDirectories[0].listings;

  const hvac = filterListingsBySubcategory(listings, 'HVAC');
  assert.deepStrictEqual(

thinking
**Outlining multi-step SEO meta update tasks**

I'll map out tasks to add metaTitle and metaDescription fields to category data, ensure API and front-end access these fields with appropriate fallbacks, and update layouts to use meta info for SEO, all while verifying the existing schema and sample data. There's a lot to coordinate across database, API, and UI layers here!
exec
bash -lc 'rg -n "SEO" -n' in /var/home/rick/Development/mega-directory succeeded in 128ms:
AGENTS.md:33:Moderate new listings, approve categories, and edit SEO metadata for any page.
AGENTS.md:45:* Edit SEO metadata for category/location pages
AGENTS.md:55:Deliver ultra-fast directory pages optimized for SEO and accessibility.
AGENTS.md:89:* Manage admin APIs for listing approval and SEO editing
docs/AGENTS.md:33:Moderate new listings, approve categories, and edit SEO metadata for any page.
docs/AGENTS.md:45:* Edit SEO metadata for category/location pages
docs/AGENTS.md:55:Deliver ultra-fast directory pages optimized for SEO and accessibility.
docs/AGENTS.md:89:* Manage admin APIs for listing approval and SEO editing
astro/README.md:3:Accessible-by-default Astro frontend that powers the public marketing site for Mega Directory. It ships with a hero layout, listing cards, category highlights, and supporting sections tuned for SEO + performance.
astro/src/components/HeroSection.astro:18:  description = 'Mega Directory pairs trusted crawlers with editorial review so every listing feels intentional. Filter by accessibility scores, SEO readiness, or the data you already track.',
astro/src/pages/index.astro:102:          Human-reviewed businesses that also pass automated QA, ADA, and SEO checks.
astro/src/pages/index.astro:124:        Each category includes SEO metadata, admin workflows, and webhook-friendly payloads.
codex/TASKS/17_admin_ui:_seo_field_editor.yaml:2:title: 'Admin UI: SEO Field Editor'
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:37:title: Add Category Meta & SEO Controls
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:705:codex/TASKS/CODEX_TODO.md:50:- [ ] 15_admin_category_seo_editor.yaml â€” UI for editing category/location SEO meta title and description.
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:827:Iâ€™m sorting through the outdated task list versus whatâ€™s actually in the codebase, especially about adding category meta and SEO controls. It looks like the front-end relies on static data rather than a real API, so Iâ€™ll likely update the `directoryCatalog` data file to include meta fields and adjust the `DirectoryPage` to use this info for meta tags, also checking for existing tests or adding new ones as needed.
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:880:**Outlining multi-step SEO meta update tasks**
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:882:I'll map out tasks to add metaTitle and metaDescription fields to category data, ensure API and front-end access these fields with appropriate fallbacks, and update layouts to use meta info for SEO, all while verifying the existing schema and sample data. There's a lot to coordinate across database, API, and UI layers here!
codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log:884:bash -lc 'rg -n "SEO" -n' in /var/home/rick/Development/mega-directory
codex/TASKS/07_frontend_subcategory_ui_and_layout.yaml:4:  speed and SEO.

thinking
**Inspecting detailed logs for plan**
exec
bash -lc "sed -n '800,980p' codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log" in /var/home/rick/Development/mega-directory succeeded in 38ms:
**Checking for task instructions**
exec
bash -lc "sed -n '1,200p' codex/TASKS/CODEX_TODO.md" in /var/home/rick/Development/mega-directory succeeded in 38ms:
# CODEX TODO

This document lists the Codex tasks in their recommended execution order.
Each task corresponds to a YAML file under `/codex/TASKS/`.

---

## 00 - Repository Setup

- [ ] 00_prepare_repository.yaml â€” Prepare the repository structure, move directories into place, update README and docker-compose config.

---

## 01â€“05 - Core Scaffolding

- [ ] 01_initialize_astro_frontend.yaml â€” Scaffold the Astro SSR frontend site.
- [ ] 02_initialize_api_server.yaml â€” Set up the Express/PostgreSQL API server with base routing and JWT auth.

thinking
**Checking continuation of agent log**
exec
bash -lc "sed -n '980,1300p' codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log" in /var/home/rick/Development/mega-directory succeeded in 40ms:


thinking
**Planning meta fields integration and testing**

I'm mapping out how to add metaTitle and metaDescription fields to category data in the directoryCatalog, ensuring fallback logic in helpers and DirectoryPage components, and writing tests first to cover this new behavior. I'll treat directoryCatalog as the frontend API data source, update helpers to propagate meta info with defaults, and prepare a multi-step plan including test updates, implementation, and running both astro and API test suites.
exec
bash -lc 'cat astro/package.json' in /var/home/rick/Development/mega-directory succeeded in 91ms:
{
  "name": "mega-directory-astro",
  "private": true,
  "type": "module",
  "version": "0.0.1",
  "scripts": {
    "dev": "astro dev",
    "start": "astro dev",
    "build": "astro build",
    "preview": "astro preview",
    "astro": "astro"
  },
  "dependencies": {
    "astro": "^5.15.5"
  },
  "devDependencies": {
    "@astrojs/tailwind": "^5.1.1",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.14"

thinking
**Investigating test script availability**
exec
bash -lc 'cat api/package.json' in /var/home/rick/Development/mega-directory succeeded in 38ms:
{
  "name": "mega-directory-api",
  "private": true,
  "version": "0.1.0",
  "main": "index.js",
  "scripts": {
    "dev": "node index.js",
    "start": "node index.js",
    "test": "node --test"
  },
  "dependencies": {
    "express": "^4.19.2",
    "jsonwebtoken": "^9.0.2"
  }
}

thinking
**Planning testing and updates**
Plan update
We need to add new test coverage before changing implementation, then update the Astro data/components, and finally run the available test suites.
  â†’ Extend Astro helper tests to cover category SEO metadata and fallback behavior
  â€¢ Implement metadata fields/fallbacks across data + components
  â€¢ Run Astro helper tests and API test suite

thinking
**Designing category SEO metadata tests**
exec
bash -lc "sed -n '200,400p' astro/src/data/directory-catalog.js" in /var/home/rick/Development/mega-directory succeeded in 102ms:
    heroTitle: 'Recruiters for media, finance, and tech',
    heroSubtitle: 'Boutique teams with candidate briefing portals and pay transparency baked in.',
    category: {
      slug: 'jobs',
      name: 'Jobs',
      description: 'Recruiting partners and curated job boards.',
    },
    location: {
      slug: 'new-york-city',
      name: 'New York City',
      state: 'NY',
      country: 'US',
      timezone: 'America/New_York',
    },
    stats: {
      coverage: 'Tri-state hybrid roles',
      responseSla: 'Candidate intros in 3 days',
      reviewers: 'Talent ops team',
    },
    featuredLimit: 2,

thinking
**Confirming end of file**
exec
bash -lc 'tail -n 20 astro/src/data/directory-catalog.js' in /var/home/rick/Development/mega-directory succeeded in 75ms:
        highlights: ['Bench of bilingual coordinators', 'Portfolio critique workshops'],
        locationLabel: 'Mission District, SF',
      },
      {
        slug: 'summa-search',
        name: 'Summa Search',
        url: 'https://summasearch.example.com',
        summary: 'Go-to-market recruiters for AI tooling startups.',
        description:
          'Run-of-show templates, comp benchmarking, and enablement for first revenue hires.',
        badges: ['Go-to-market', 'AI'],
        subcategories: ['gtm'],
        score: 76.7,
        scoreTooltip: 'Score includes ramp success tracking 90 days post-hire.',
        highlights: ['Intent-based sourcing', 'Recordings of calibration calls shared'],
        locationLabel: 'SoMa, SF',
      },
    ],
  },
];

thinking
**Planning test updates for category metadata**

Iâ€™m laying out detailed changes to the test file to add and verify meta fields on categories across directory entries, including how to handle fallbacks. I want to carefully adjust sample data, add new tests for `resolveCategorySeoMetadata`, and ensure existing tests check the meta info properly before implementing the actual function. This TDD approach should reveal gaps clearly.

thinking
**Attempting smaller patch segments**
exec
bash -lc "sed -n '1,220p' astro/test/directory-helpers.test.mjs" in /var/home/rick/Development/mega-directory succeeded in 41ms:
import test from 'node:test';
import assert from 'node:assert/strict';
import {
  sortListingsByScore,
  buildDirectoryGroups,
  buildDirectoryPath,
  buildSubcategoryPath,
  buildDirectorySubcategories,
  buildSubcategoryFilterNav,
  filterListingsBySubcategory,
  findDirectoryEntry,
  segmentFeaturedListings,
} from '../src/lib/directory-helpers.js';

const sampleDirectories = [
  {
    slug: 'professional-services-new-york-city',
    name: 'NYC Professional Services',
    category: { slug: 'professional-services', name: 'Professional Services' },
    location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },

thinking
**Adjusting patch to actual file content**
file update
M /var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs
@@ -12,2 +12,3 @@
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
apply_patch(auto_approved=true) exited 0 in 5ms:
Success. Updated the following files:
M astro/test/directory-helpers.test.mjs
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..0e906365532603f420c8a4714ff76dd594fd040e
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,6 +10,7 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..0e906365532603f420c8a4714ff76dd594fd040e
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,6 +10,7 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [


thinking
**Updating sample directory category object**
file update
M /var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs
@@ -19,3 +19,9 @@
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
apply_patch(auto_approved=true) exited 0 in 5ms:
Success. Updated the following files:
M astro/test/directory-helpers.test.mjs
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..8d14ba9531f4b2dd335aa9838bb6977318126039
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..8d14ba9531f4b2dd335aa9838bb6977318126039
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',


thinking
**Applying second patch entry**
file update
M /var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs
@@ -68,3 +68,9 @@
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
apply_patch(auto_approved=true) exited 0 in 5ms:
Success. Updated the following files:
M astro/test/directory-helpers.test.mjs
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..7e03be3d7f21336e987dd00a2e06c988d7cd2312
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..7e03be3d7f21336e987dd00a2e06c988d7cd2312
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',


thinking
**Updating third entry category description**
file update
M /var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs
@@ -97,3 +97,7 @@
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
apply_patch(auto_approved=true) exited 0 in 6ms:
Success. Updated the following files:
M astro/test/directory-helpers.test.mjs
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..a3b1651d5603cac9b851786147c860b260c388cd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..a3b1651d5603cac9b851786147c860b260c388cd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',


thinking
**Adding assertions to buildDirectoryGroups test**
file update
M /var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs
@@ -165,2 +165,7 @@
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
@@ -187,2 +192,7 @@
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
apply_patch(auto_approved=true) exited 0 in 6ms:
Success. Updated the following files:
M astro/test/directory-helpers.test.mjs
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e86b1c96b1152692ebaec614d47095a1bdae33b9
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e86b1c96b1152692ebaec614d47095a1bdae33b9
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {


thinking
**Preparing to add test for resolveCategorySeoMetadata**
exec
bash -lc "sed -n '200,400p' astro/test/directory-helpers.test.mjs" in /var/home/rick/Development/mega-directory succeeded in 38ms:
test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
  const directory = sampleDirectories[0];
  const subcategories = buildDirectorySubcategories(directory);

  assert.deepStrictEqual(
    subcategories.map((entry) => entry.slug),
    ['hvac', 'electricians'],
    'only subcategories with listings are returned sorted by count'
  );

  const hvac = subcategories.find((entry) => entry.slug === 'hvac');
  assert.ok(hvac);
  assert.strictEqual(hvac.listingCount, 2);
  assert.strictEqual(hvac.name, 'HVAC');

  const electricians = subcategories.find((entry) => entry.slug === 'electricians');
  assert.ok(electricians);
  assert.strictEqual(electricians.listingCount, 1);
});

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e86b1c96b1152692ebaec614d47095a1bdae33b9
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {


thinking
**Appending new test case**
file update
M /var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs
@@ -308 +308,31 @@
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});
apply_patch(auto_approved=true) exited 0 in 7ms:
Success. Updated the following files:
M astro/test/directory-helpers.test.mjs
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});

file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Preparing to run tests on new helper**
exec
bash -lc 'cd astro && node --test test/directory-helpers.test.mjs' in /var/home/rick/Development/mega-directory exited 1 in 462ms:
TAP version 13
# file:///var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs:13
#   resolveCategorySeoMetadata,
#   ^^^^^^^^^^^^^^^^^^^^^^^^^^
# SyntaxError: The requested module '../src/lib/directory-helpers.js' does not provide an export named 'resolveCategorySeoMetadata'
#     at ModuleJob._instantiate (node:internal/modules/esm/module_job:228:21)
#     at async ModuleJob.run (node:internal/modules/esm/module_job:337:5)
#     at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:665:26)
#     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
# Node.js v22.20.0
# Subtest: test/directory-helpers.test.mjs
not ok 1 - test/directory-helpers.test.mjs
  ---
  duration_ms: 179.742454
  type: 'test'
  location: '/var/home/rick/Development/mega-directory/astro/test/directory-helpers.test.mjs:1:1'
  failureType: 'testCodeFailure'
  exitCode: 1
  signal: ~
  error: 'test failed'
file update:
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Mapping out implementation details**
file update
M /var/home/rick/Development/mega-directory/astro/src/lib/directory-helpers.js
@@ -5,2 +5,5 @@
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
@@ -25,2 +28,4 @@
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
@@ -103,11 +108,20 @@
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
@@ -197,2 +211,16 @@
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
apply_patch(auto_approved=true) exited 0 in 13ms:
Success. Updated the following files:
M astro/src/lib/directory-helpers.js
file update:
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});

file update:
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Checking constant usage and replacements**
exec
bash -lc "sed -n '1,200p' astro/src/components/DirectoryPage.astro" in /var/home/rick/Development/mega-directory succeeded in 54ms:
---
import BaseLayout from '../layouts/BaseLayout.astro';
import DirectoryListing from './DirectoryListing.astro';

const {
  directory,
  navItems,
  heroStats,
  listings = [],
  totalListings = listings.length,
  subcategoryNav = [],
  featuredHero = null,
  featuredTierTwo = [],
} = Astro.props;

const hasSubcategoryNav = subcategoryNav.length > 0;
const activeFilter = hasSubcategoryNav
  ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
  : null;
const filterLabel = activeFilter?.label ?? 'All subcategories';
file update:
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Adding SEO metadata computations**
file update
M /var/home/rick/Development/mega-directory/astro/src/components/DirectoryPage.astro
@@ -2,2 +2,3 @@
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
@@ -15,2 +16,12 @@
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
@@ -55,4 +66,4 @@
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
apply_patch(auto_approved=true) exited 0 in 11ms:
Success. Updated the following files:
M astro/src/components/DirectoryPage.astro
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});

file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Adding meta fields to categories**
file update
M /var/home/rick/Development/mega-directory/astro/src/data/directory-catalog.js
@@ -10,2 +10,4 @@
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
@@ -125,2 +127,4 @@
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
@@ -205,2 +209,4 @@
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
@@ -290,2 +296,4 @@
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
apply_patch(auto_approved=true) exited 0 in 11ms:
Success. Updated the following files:
M astro/src/data/directory-catalog.js
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});

file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Ensuring helper exports and updating tests**
Plan update
  âœ“ Extend Astro helper tests to cover category SEO metadata and fallback behavior
  âœ“ Implement metadata fields/fallbacks across data + components
  â€¢ Run Astro helper tests and API test suite
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Running tests on astro module**
exec
bash -lc 'cd astro && node --test test/directory-helpers.test.mjs' in /var/home/rick/Development/mega-directory succeeded in 386ms:
TAP version 13
# Subtest: test/directory-helpers.test.mjs
ok 1 - test/directory-helpers.test.mjs
  ---
  duration_ms: 191.874413
  type: 'test'
  ...
1..1
# tests 1
# suites 0
# pass 1
# fail 0
# cancelled 0
# skipped 0
# todo 0
# duration_ms 206.84481
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Running API tests**
exec
bash -lc 'cd api && npm test' in /var/home/rick/Development/mega-directory succeeded in 2.54s:

> mega-directory-api@0.1.0 test
> node --test

TAP version 13
# Subtest: test/server.test.js
ok 1 - test/server.test.js
  ---
  duration_ms: 2072.485601
  type: 'test'
  ...
1..1
# tests 1
# suites 0
# pass 1
# fail 0
# cancelled 0
# skipped 0
# todo 0
# duration_ms 2094.372899
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Checking git status**
exec
bash -lc 'git status -sb' in /var/home/rick/Development/mega-directory succeeded in 54ms:
## main...origin/main [ahead 1]
 M codex/LOGS/codex_run_2025-11-11_04-26-54.log
 M codex/LOGS/tasklog_08_setup_featured_listings_logic_1762855542.log
?? astro/src/components/DirectoryListing.astro
?? astro/src/components/DirectoryPage.astro
?? astro/src/data/
?? astro/src/lib/
?? astro/src/pages/listings/
?? astro/test/
?? codex/LOGS/tasklog_08_setup_featured_listings_logic_1762855542.log.done
?? codex/LOGS/tasklog_09_add_category_meta_and_seo_controls_1762856433.log
?? codex/TASKS/work_list
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Analyzing git status anomalies**
exec
bash -lc 'rg -n "resolveCategorySeoMetadata" -n astro/src/lib/directory-helpers.js' in /var/home/rick/Development/mega-directory succeeded in 90ms:
115:    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
212:export function resolveCategorySeoMetadata(category = {}) {
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Gathering precise code references**
exec
bash -lc 'rg -n "pageTitle" astro/src/components/DirectoryPage.astro' in /var/home/rick/Development/mega-directory succeeded in 50ms:
25:const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
67:  title={pageTitle}
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Searching for pageDescription references**
exec
bash -lc 'rg -n "pageDescription" astro/src/components/DirectoryPage.astro' in /var/home/rick/Development/mega-directory succeeded in 51ms:
24:const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
68:  description={pageDescription}
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Searching for metaTitle occurrences**
exec
bash -lc 'rg -n "metaTitle" astro/src/data/directory-catalog.js' in /var/home/rick/Development/mega-directory succeeded in 43ms:
11:      metaTitle: 'Professional Services Directory',
128:      metaTitle: 'Professional Services Directory',
210:      metaTitle: 'Jobs & Recruiters Directory',
297:      metaTitle: 'Jobs & Recruiters Directory',
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Searching for test occurrences with line numbers**
exec
bash -lc 'rg -n "resolveCategory" astro/test/directory-helpers.test.mjs' in /var/home/rick/Development/mega-directory succeeded in 52ms:
13:  resolveCategorySeoMetadata,
310:test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
311:  const explicit = resolveCategorySeoMetadata({
322:  const fallbackFromDescription = resolveCategorySeoMetadata({
332:  const defaultFallback = resolveCategorySeoMetadata({});
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Searching for assertion lines in tests**
exec
bash -lc 'rg -n "metaTitle" astro/test/directory-helpers.test.mjs' in /var/home/rick/Development/mega-directory succeeded in 47ms:
24:      metaTitle: 'Professional Services Directory',
73:      metaTitle: 'Professional Services Directory',
166:  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
193:  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
314:    metaTitle: '  Elite Services  ',
318:    metaTitle: 'Elite Services',
326:  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
333:  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Updating plan after Step3 completion**
Plan update
All planned steps are finished and both Astro and API test suites now pass.
  âœ“ Extend Astro helper tests to cover category SEO metadata and fallback behavior
  âœ“ Implement metadata fields/fallbacks across data + components
  âœ“ Run Astro helper tests and API test suite
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});


thinking
**Summarizing final changes and tests**

I'm putting together a concise summary of the key updates: added a new helper with fallback logic integrated into directory grouping, updated DirectoryPage to use that helper for layout meta fields, extended directory catalog data with meta information, and enhanced tests to cover all new behavior. I'll include exact file paths and line numbers for each change and list the test commands run. Finally, I'll suggest logical next steps like connecting these meta fields to the real API or database as a natural follow-up.
codex
**Updates**
- Added `resolveCategorySeoMetadata` plus supporting sanitizers so every category now carries meta title/description with deterministic fallbacks, and wired the helper into the grouping flow to keep metadata in sync across locations (`astro/src/lib/directory-helpers.js:115`, `astro/src/lib/directory-helpers.js:212`).
- Directory pages import the helper and compute `pageTitle`/`pageDescription` before handing them to `BaseLayout`, falling back to hero copy only when no explicit SEO text exists (`astro/src/components/DirectoryPage.astro:15`, `astro/src/components/DirectoryPage.astro:24`, `astro/src/components/DirectoryPage.astro:67`).
- Sample â€œAPIâ€ payload now includes the new SEO fields for every category so the frontend can render realistic metadata immediately (`astro/src/data/directory-catalog.js:11`).
- Expanded the Astro helper tests to assert that category objects retain meta data, that fallbacks behave as expected, and that the new helper trims input properly (`astro/test/directory-helpers.test.mjs:13`, `astro/test/directory-helpers.test.mjs:166`, `astro/test/directory-helpers.test.mjs:310`).

**Tests**
- `cd astro && node --test test/directory-helpers.test.mjs`
- `cd api && npm test`

**Next**
- Once the real API is hooked up to Postgres, feed these meta fields straight from the database/admin UI so the frontend no longer relies on the static catalog.
file update:
diff --git a/astro/src/components/DirectoryPage.astro b/astro/src/components/DirectoryPage.astro
index 5f62c3e0689852bd94db395da8796684ce88a279..528cea13a1be1abebab86672d6e4fcd12cee267e
--- a/astro/src/components/DirectoryPage.astro
+++ b/astro/src/components/DirectoryPage.astro
@@ -1,5 +1,6 @@
 ---
 import BaseLayout from '../layouts/BaseLayout.astro';
+import { resolveCategorySeoMetadata } from '../lib/directory-helpers.js';
 import DirectoryListing from './DirectoryListing.astro';
 
 const {
@@ -13,6 +14,16 @@
   featuredTierTwo = [],
 } = Astro.props;
 
+const categorySeo = resolveCategorySeoMetadata(directory?.category ?? {});
+const locationName = typeof directory?.location?.name === 'string' ? directory.location.name : '';
+const hasExplicitCategoryDescription =
+  typeof directory?.category?.metaDescription === 'string' &&
+  directory.category.metaDescription.trim().length > 0;
+const heroSubtitle = typeof directory?.heroSubtitle === 'string' ? directory.heroSubtitle.trim() : '';
+const fallbackDescription = heroSubtitle || categorySeo.metaDescription;
+const pageDescription = hasExplicitCategoryDescription ? categorySeo.metaDescription : fallbackDescription;
+const pageTitle = locationName ? `${categorySeo.metaTitle} Â· ${locationName}` : categorySeo.metaTitle;
+
 const hasSubcategoryNav = subcategoryNav.length > 0;
 const activeFilter = hasSubcategoryNav
   ? subcategoryNav.find((item) => item.active) ?? subcategoryNav[0]
@@ -53,8 +64,8 @@
 ---
 
 <BaseLayout
-  title={`${directory.category.name} Â· ${directory.location.name}`}
-  description={directory.heroSubtitle}
+  title={pageTitle}
+  description={pageDescription}
   navItems={navItems}
 >
   <section id="hero" class="space-y-6">
diff --git a/astro/src/data/directory-catalog.js b/astro/src/data/directory-catalog.js
index 6928cf34159b2e928eeae0287c5b4aa54149cbca..8ba288d1c2c5ab085e05c506558b57ca53e2beb2
--- a/astro/src/data/directory-catalog.js
+++ b/astro/src/data/directory-catalog.js
@@ -8,6 +8,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'new-york-city',
@@ -123,6 +125,8 @@
       slug: 'professional-services',
       name: 'Professional Services',
       description: 'Verified operators for commercial and residential work orders.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC crews, and facilities partners.',
     },
     location: {
       slug: 'denver-co',
@@ -203,6 +207,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'new-york-city',
@@ -288,6 +294,8 @@
       slug: 'jobs',
       name: 'Jobs',
       description: 'Recruiting partners and curated job boards.',
+      metaTitle: 'Jobs & Recruiters Directory',
+      metaDescription: 'High-signal recruiting partners and curated job boards.',
     },
     location: {
       slug: 'san-francisco',
diff --git a/astro/src/lib/directory-helpers.js b/astro/src/lib/directory-helpers.js
index 63abb0f97da6634ece80c2af885134f1e947ba30..75e1c76093559f1ad0f99704d83812d57049df0c
--- a/astro/src/lib/directory-helpers.js
+++ b/astro/src/lib/directory-helpers.js
@@ -3,6 +3,9 @@
 const FALLBACK_HERO_LABEL = 'Top pick';
 const FALLBACK_TIER_TWO_LABEL = 'Tier-two highlight';
 const FEATURED_TIER_ORDER = { HERO: 0, PREMIUM: 1, STANDARD: 2 };
+const DEFAULT_DIRECTORY_NAME = 'Mega Directory';
+const DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE =
+  'Discover curated NAME listings on Mega Directory.';
 
 const normalizeScore = (value) =>
   typeof value === 'number' && Number.isFinite(value) ? value : FALLBACK_SCORE;
@@ -23,6 +26,8 @@
     .map((segment) => segment.charAt(0).toUpperCase() + segment.slice(1))
     .join(' ') || value;
 
+const sanitizeText = (value) => (typeof value === 'string' ? value.trim() : '');
+
 const getListingSlug = (listing) => normalizeSlug(listing?.slug ?? listing?.name, '');
 
 const normalizeListingSubcategories = (entries) => {
@@ -101,15 +106,24 @@
     const locationSlug = normalizeSlug(directory.location.slug);
     const listings = sortListingsByScore(directory.listings ?? []);
 
-    if (!categoryMap.has(categorySlug)) {
-      categoryMap.set(categorySlug, {
-        category: { ...directory.category, slug: categorySlug },
+    const existingEntry = categoryMap.get(categorySlug);
+    const mergedCategory = {
+      ...(existingEntry?.category ?? {}),
+      ...(directory.category ?? {}),
+      slug: categorySlug,
+    };
+    const seoMetadata = resolveCategorySeoMetadata(mergedCategory);
+    let categoryEntry = existingEntry;
+    if (!categoryEntry) {
+      categoryEntry = {
+        category: { ...mergedCategory, ...seoMetadata },
         locations: [],
         totalListings: 0,
-      });
+      };
+      categoryMap.set(categorySlug, categoryEntry);
+    } else {
+      categoryEntry.category = { ...mergedCategory, ...seoMetadata };
     }
-
-    const categoryEntry = categoryMap.get(categorySlug);
 
     let locationEntry = categoryEntry.locations.find(
       (entry) => entry.location.slug === locationSlug,
@@ -195,6 +209,20 @@
   );
 }
 
+export function resolveCategorySeoMetadata(category = {}) {
+  const name = sanitizeText(category?.name) || DEFAULT_DIRECTORY_NAME;
+  const explicitTitle = sanitizeText(category?.metaTitle);
+  const explicitDescription = sanitizeText(category?.metaDescription);
+  const fallbackDescription =
+    sanitizeText(category?.description) ||
+    DEFAULT_CATEGORY_DESCRIPTION_TEMPLATE.replace('NAME', name);
+
+  return {
+    metaTitle: explicitTitle || name,
+    metaDescription: explicitDescription || fallbackDescription,
+  };
+}
+
 export function buildDirectorySubcategories(directory) {
   if (!directory) {
     return [];
diff --git a/astro/test/directory-helpers.test.mjs b/astro/test/directory-helpers.test.mjs
index ccc3be07de4b0e89b9f43a568d50dc5e281ceb55..e075aad2e5f0351aeb2106ab86d4855116e0befd
--- a/astro/test/directory-helpers.test.mjs
+++ b/astro/test/directory-helpers.test.mjs
@@ -10,13 +10,20 @@
   filterListingsBySubcategory,
   findDirectoryEntry,
   segmentFeaturedListings,
+  resolveCategorySeoMetadata,
 } from '../src/lib/directory-helpers.js';
 
 const sampleDirectories = [
   {
     slug: 'professional-services-new-york-city',
     name: 'NYC Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Trusted Pros in NYC',
     heroSubtitle: 'Browse curated electricians, plumbers, HVAC, and more.',
@@ -59,7 +66,13 @@
   {
     slug: 'professional-services-denver',
     name: 'Denver Professional Services',
-    category: { slug: 'professional-services', name: 'Professional Services' },
+    category: {
+      slug: 'professional-services',
+      name: 'Professional Services',
+      description: 'Verified pros for commercial and residential requests.',
+      metaTitle: 'Professional Services Directory',
+      metaDescription: 'Curated electricians, HVAC teams, and facility crews.',
+    },
     location: { slug: 'denver-co', name: 'Denver', region: 'CO' },
     heroTitle: 'Mile High Maintainers',
     heroSubtitle: 'Regional trades and contractors with transparent SLAs.',
@@ -82,7 +95,11 @@
   {
     slug: 'jobs-new-york-city',
     name: 'NYC Hiring Partners',
-    category: { slug: 'jobs', name: 'Jobs' },
+    category: {
+      slug: 'jobs',
+      name: 'Jobs',
+      description: 'Recruiting partners and curated job boards.',
+    },
     location: { slug: 'new-york-city', name: 'New York City', region: 'NY' },
     heroTitle: 'Recruiting in NYC',
     heroSubtitle: 'Specialists for finance, media, and tech roles.',
@@ -146,6 +163,11 @@
   assert.ok(services, 'professional services group present');
   assert.strictEqual(services.totalListings, 5);
   assert.strictEqual(services.locations.length, 2);
+  assert.strictEqual(services.category.metaTitle, 'Professional Services Directory');
+  assert.strictEqual(
+    services.category.metaDescription,
+    'Curated electricians, HVAC teams, and facility crews.'
+  );
 
   const nyc = services.locations.find((loc) => loc.location.slug === 'new-york-city');
   assert.ok(nyc, 'NYC location bucket present');
@@ -168,6 +190,11 @@
   assert.strictEqual(jobs.totalListings, 1);
   assert.strictEqual(jobs.locations.length, 1);
   assert.strictEqual(jobs.locations[0].directories[0].path, '/listings/jobs/new-york-city');
+  assert.strictEqual(jobs.category.metaTitle, 'Jobs');
+  assert.strictEqual(
+    jobs.category.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
 });
 
 test('buildDirectorySubcategories aggregates metadata and listing counts', () => {
@@ -279,3 +306,33 @@
 
   assert.deepStrictEqual(result.remainingListings, [], 'all listings consumed when under limit');
 });
+
+test('resolveCategorySeoMetadata trims values and applies layered fallbacks', () => {
+  const explicit = resolveCategorySeoMetadata({
+    name: ' Professional Services ',
+    description: ' Verified crews ',
+    metaTitle: '  Elite Services  ',
+    metaDescription: '  All the best teams  ',
+  });
+  assert.deepStrictEqual(explicit, {
+    metaTitle: 'Elite Services',
+    metaDescription: 'All the best teams',
+  });
+
+  const fallbackFromDescription = resolveCategorySeoMetadata({
+    name: 'Jobs',
+    description: 'Recruiting partners and curated job boards.',
+  });
+  assert.strictEqual(fallbackFromDescription.metaTitle, 'Jobs');
+  assert.strictEqual(
+    fallbackFromDescription.metaDescription,
+    'Recruiting partners and curated job boards.'
+  );
+
+  const defaultFallback = resolveCategorySeoMetadata({});
+  assert.strictEqual(defaultFallback.metaTitle, 'Mega Directory');
+  assert.strictEqual(
+    defaultFallback.metaDescription,
+    'Discover curated Mega Directory listings on Mega Directory.'
+  );
+});

tokens used
106,332
**Updates**
- Added `resolveCategorySeoMetadata` plus supporting sanitizers so every category now carries meta title/description with deterministic fallbacks, and wired the helper into the grouping flow to keep metadata in sync across locations (`astro/src/lib/directory-helpers.js:115`, `astro/src/lib/directory-helpers.js:212`).
- Directory pages import the helper and compute `pageTitle`/`pageDescription` before handing them to `BaseLayout`, falling back to hero copy only when no explicit SEO text exists (`astro/src/components/DirectoryPage.astro:15`, `astro/src/components/DirectoryPage.astro:24`, `astro/src/components/DirectoryPage.astro:67`).
- Sample â€œAPIâ€ payload now includes the new SEO fields for every category so the frontend can render realistic metadata immediately (`astro/src/data/directory-catalog.js:11`).
- Expanded the Astro helper tests to assert that category objects retain meta data, that fallbacks behave as expected, and that the new helper trims input properly (`astro/test/directory-helpers.test.mjs:13`, `astro/test/directory-helpers.test.mjs:166`, `astro/test/directory-helpers.test.mjs:310`).

**Tests**
- `cd astro && node --test test/directory-helpers.test.mjs`
- `cd api && npm test`

**Next**
- Once the real API is hooked up to Postgres, feed these meta fields straight from the database/admin UI so the frontend no longer relies on the static catalog.
